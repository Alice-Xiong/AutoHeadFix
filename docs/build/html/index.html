
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to AutoHeadFix’s documentation! &#8212; AutoHeadFix 2.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">AutoHeadFix 2.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-autoheadfix-s-documentation">
<h1>Welcome to AutoHeadFix’s documentation!<a class="headerlink" href="#welcome-to-autoheadfix-s-documentation" title="Permalink to this headline">¶</a></h1>
<p><strong>Installation/Setup</strong></p>
<p>To download the main repository <a class="reference external" href="https://github.com/jamieboyd/AutoHeadFix/tree/lever_config/">click here</a></p>
<p>For instructions on building/setting up <a class="reference external" href="https://github.com/zenenhornstein/AHF_setup">click here</a></p>
<span class="target" id="module-AHF_Base"></span><div class="section" id="ahf-base-py">
<h2>AHF_Base.py<a class="headerlink" href="#ahf-base-py" title="Permalink to this headline">¶</a></h2>
<p>The base upon which everything else is built</p>
<dl class="class">
<dt id="AHF_Base.AHF_Base">
<em class="property">class </em><code class="sig-name descname">AHF_Base</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines conventions for classes used for accesing hardware and doing subtasks in AutoHeadFix code
Each class has a static method, config_user_get, to create or edit a settings dictionary, and will be inititialized
with a settings dictionary. The setup function does hardware initialization, or other inititialization.</p>
<dl class="method">
<dt id="AHF_Base.AHF_Base.about">
<em class="property">abstract static </em><code class="sig-name descname">about</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.about" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a brief message describing your sub-class, used when asking user to pick a sub-class of this class</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Base.AHF_Base.config_user_get">
<em class="property">abstract static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Base.AHF_Base.hardwareTest">
<em class="property">abstract </em><code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Base.AHF_Base.setdown">
<em class="property">abstract </em><code class="sig-name descname">setdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.setdown" title="Permalink to this definition">¶</a></dt>
<dd><p>oppposite of setup. Releases any hardware resouces. can be run before editing settings so GPIO
pins can be reused, for example. This strategy should be used in hardwareTest method.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Base.AHF_Base.setup">
<em class="property">abstract </em><code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>does hardware initialization with (possibly updated) info in self.settingsDict
Run by __init__, or can be run  separately after editing the settingsDict</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool – the truth that setup completed without errors</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AHF_Base.AHF_Base.subject_user_get">
<em class="property">static </em><code class="sig-name descname">subject_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Base.AHF_Base.subject_user_get" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict – an updated dictionary after asking the user for subject related and maybe individualized parameters</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Task">
<span id="ahf-task"></span><h2>AHF_Task<a class="headerlink" href="#module-AHF_Task" title="Permalink to this headline">¶</a></h2>
<p>We copy all variables from cage settings and exp settings, plus references to all created objects,
into a single object called Task</p>
<dl class="class">
<dt id="AHF_Task.Task">
<em class="property">class </em><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">fileName=''</em>, <em class="sig-param">object=None</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>The plan is to copy all variables from settings, user, into a single object
The object will have fields for things loaded from hardware config dictionary and experiment config dictionary
as well as fields for objects created when program runs (headFixer, TagReader, rewarder, camera, stimulator)
Objects that are created will have a dictionary of their own as an entry in the main dictionay
Using the same names in the object fields as in the dictionary, and only loading one dictionary from
a combined settings file, we don’t need a dictionary while thr program is running because the task object can recreate the dict
with self.__dict__</p>
<dl class="method">
<dt id="AHF_Task.Task.saveSettings">
<code class="sig-name descname">saveSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Task.Task.saveSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves current configuration stored in the task object into AHF_task_*.jsn
Call this function after modifying the contents of the task to save your changes</p>
<dl class="field-list simple">
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>none</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AHF_Task.Task.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Task.Task.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up hardware and other objects that need setting up, each object is made by initing a class with a dictionary</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Task.Task.showSettings">
<code class="sig-name descname">showSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Task.Task.showSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints settings to screen in a numbered fashion from an ordered dictionary, making it easy to select a setting to
change. Returns the ordered dictionary, used by editSettings function</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_BrainLight">
<span id="ahf-brainlight"></span><h2>AHF_BrainLight<a class="headerlink" href="#module-AHF_BrainLight" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_BrainLight.AHF_BrainLight">
<em class="property">class </em><code class="sig-name descname">AHF_BrainLight</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_BrainLight.AHF_BrainLight" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="AHF_BrainLight.AHF_BrainLight.config_user_get">
<em class="property">abstract static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_BrainLight.AHF_BrainLight.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_BrainLight.AHF_BrainLight.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_BrainLight.AHF_BrainLight.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>generic hardware tester for brain illumination, turns on, waits 2 seconds, turns off</p>
</dd></dl>

<dl class="method">
<dt id="AHF_BrainLight.AHF_BrainLight.offForStim">
<em class="property">abstract </em><code class="sig-name descname">offForStim</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_BrainLight.AHF_BrainLight.offForStim" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when headFixing ends, turning off whatever was turned on</p>
</dd></dl>

<dl class="method">
<dt id="AHF_BrainLight.AHF_BrainLight.onForStim">
<em class="property">abstract </em><code class="sig-name descname">onForStim</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_BrainLight.AHF_BrainLight.onForStim" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs when headFixing starts, illuminating the brain or whatever needs illuminating</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ahf-camera2">
<h2>AHF_Camera2<a class="headerlink" href="#ahf-camera2" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-AHF_ContactCheck_Elec">
<span id="ahf-contactcheck-elec"></span><h2>AHF_ContactCheck_Elec<a class="headerlink" href="#module-AHF_ContactCheck_Elec" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec">
<em class="property">class </em><code class="sig-name descname">AHF_ContactCheck_Elec</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.about">
<em class="property">static </em><code class="sig-name descname">about</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.about" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a brief message describing your sub-class, used when asking user to pick a sub-class of this class</p>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.config_user_get">
<em class="property">static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.contactCheckCallback">
<em class="property">static </em><code class="sig-name descname">contactCheckCallback</code><span class="sig-paren">(</span><em class="sig-param">channel</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.contactCheckCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Contacts are immediate, but un-contacts are delayed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.setdown">
<code class="sig-name descname">setdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.setdown" title="Permalink to this definition">¶</a></dt>
<dd><p>oppposite of setup. Releases any hardware resouces. can be run before editing settings so GPIO
pins can be reused, for example. This strategy should be used in hardwareTest method.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>does hardware initialization with (possibly updated) info in self.settingsDict
Run by __init__, or can be run  separately after editing the settingsDict</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool – the truth that setup completed without errors</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.startLogging">
<code class="sig-name descname">startLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.startLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>starts contactChecker running background task updated gTask.contact
do not use waitForContact or waitForNoContact when logging</p>
</dd></dl>

<dl class="method">
<dt id="AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.stopLogging">
<code class="sig-name descname">stopLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ContactCheck_Elec.AHF_ContactCheck_Elec.stopLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>stops contactChecker running background task</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ahf-headfixer-nofix">
<h2>AHF_HeadFixer_NoFix<a class="headerlink" href="#ahf-headfixer-nofix" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-AHF_HeadFixer_PWM">
<span id="ahf-headfixer-pwm"></span><h2>AHF_HeadFixer_PWM<a class="headerlink" href="#module-AHF_HeadFixer_PWM" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM">
<em class="property">class </em><code class="sig-name descname">AHF_HeadFixer_PWM</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class for PWM-based head fixers for servo motors. As long as your subclass maps your PWM range onto
the appropriate pulse width for the servo, you should be good to go.</p>
<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.config_user_get">
<em class="property">abstract static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.fixMouse">
<code class="sig-name descname">fixMouse</code><span class="sig-paren">(</span><em class="sig-param">thisTag</em>, <em class="sig-param">resultsDict={}</em>, <em class="sig-param">individualDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.fixMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>performs head fixation by energizing a piston, moving a servomotor, etc
returns True if successful, else false.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.individualSettings">
<code class="sig-name descname">individualSettings</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.individualSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>copies servo fixed position to dictionary - there is no reason to have different released positions per subject
TO DO: add multiple headfixing levels, maybe progression based on resdults</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.releaseMouse">
<code class="sig-name descname">releaseMouse</code><span class="sig-paren">(</span><em class="sig-param">thisTag</em>, <em class="sig-param">resultsDict={}</em>, <em class="sig-param">settingsDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.releaseMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>releases mouse from head fixation by relaxing a piston, moving a servomotor, etc</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.setup">
<em class="property">abstract </em><code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer_PWM.AHF_HeadFixer_PWM.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>gets settings from dict, not &#64;abstract because this may be all you nees, as for HeadFixer_NoFix</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="AHF_HeadFixer_PWM.random">
<code class="sig-name descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; x in the interval [0, 1).<a class="headerlink" href="#AHF_HeadFixer_PWM.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-AHF_Stimulator_Lever">
<span id="ahf-stimulator-lever"></span><h2>AHF_Stimulator_Lever<a class="headerlink" href="#module-AHF_Stimulator_Lever" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever">
<em class="property">class </em><code class="sig-name descname">AHF_Stimulator_Lever</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever" title="Permalink to this definition">¶</a></dt>
<dd><p>AHF_Stimulator_Lever runs a lever task by calling ptLeverThread C-module code that records lever position and puts torque on the lever</p>
<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.MAX_FORCE_ARRAY_SIZE">
<code class="sig-name descname">MAX_FORCE_ARRAY_SIZE</code><em class="property"> = 125</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.MAX_FORCE_ARRAY_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>######################################### Global settings for the task########################################################
Things that do not vary on a per mouse basis, these inlcude hardware settings, some trial timing</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.about">
<em class="property">static </em><code class="sig-name descname">about</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.about" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a brief message describing your sub-class, used when asking user to pick a sub-class of this class</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.config_user_get">
<em class="property">static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultDemoteRate">
<code class="sig-name descname">defaultDemoteRate</code><em class="property"> = 0.25</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultDemoteRate" title="Permalink to this definition">¶</a></dt>
<dd><p>training for goal position</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultGoalIncr">
<code class="sig-name descname">defaultGoalIncr</code><em class="property"> = 5</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultGoalIncr" title="Permalink to this definition">¶</a></dt>
<dd><p>training for holdTime</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultGoalWidth">
<code class="sig-name descname">defaultGoalWidth</code><em class="property"> = 100</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultGoalWidth" title="Permalink to this definition">¶</a></dt>
<dd><p>Perturbation settings for starting a mouse. Force on lever is adjusted up or down relative to const force, and then left at new value, and lever must be kept in goal area</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultMotorDir">
<code class="sig-name descname">defaultMotorDir</code><em class="property"> = 0</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultMotorDir" title="Permalink to this definition">¶</a></dt>
<dd><p>If MOTOR_DIR_PIN = 0, 16 bit force output (0 - 4095) goes from full counterclockwise force to full clockwise force
with midpoint (2048) being no force on lever. If MOTOR_DIR_PIN is non-zero, 0-4095 maps from  no force to full force, and
MOTOR_DIR_PIN is the GPIO pin that controls the direction of the force, clockwise or counter-clockwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultPerturbForceRandom">
<code class="sig-name descname">defaultPerturbForceRandom</code><em class="property"> = 400</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultPerturbForceRandom" title="Permalink to this definition">¶</a></dt>
<dd><p>Training settings</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultPrePullTime">
<code class="sig-name descname">defaultPrePullTime</code><em class="property"> = 0.25</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultPrePullTime" title="Permalink to this definition">¶</a></dt>
<dd><p>############################################# Mouse Specific Settings follow #####################################################
default pull difficulty settings for starting a mouse
toGoalTime plus holdTime must be &lt; recordingTime for cued trials. PrePullTime plus holdTime must be &lt; recordingTime for un-cued trials</p>
</dd></dl>

<dl class="attribute">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultTrialTimeout">
<code class="sig-name descname">defaultTrialTimeout</code><em class="property"> = 0.5</em><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.defaultTrialTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings for uncued trials</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.quitting">
<code class="sig-name descname">quitting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.quitting" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before AutoHEadFix exits. Gives stimulator chance to do any needed cleanup</p>
<p>A stimulator may, e.g., open files and wish to close them before exiting, or use hardware that needs to be cleaned up</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">level=-1</em>, <em class="sig-param">settingsDict={}</em>, <em class="sig-param">resultsDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at start of each head fix. Does whatever</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.setdown">
<code class="sig-name descname">setdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.setdown" title="Permalink to this definition">¶</a></dt>
<dd><p>oppposite of setup. Releases any hardware resouces. can be run before editing settings so GPIO
pins can be reused, for example. This strategy should be used in hardwareTest method.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulator_Lever.AHF_Stimulator_Lever.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator_Lever.AHF_Stimulator_Lever.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>does hardware initialization with (possibly updated) info in self.settingsDict
Run by __init__, or can be run  separately after editing the settingsDict</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool – the truth that setup completed without errors</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="AHF_Stimulator_Lever.random">
<code class="sig-name descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; x in the interval [0, 1).<a class="headerlink" href="#AHF_Stimulator_Lever.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-AHF_ClassAndDictUtils">
<span id="ahf-classanddictutils"></span><h2>AHF_ClassAndDictUtils<a class="headerlink" href="#module-AHF_ClassAndDictUtils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="AHF_ClassAndDictUtils.Class_from_file">
<code class="sig-name descname">Class_from_file</code><span class="sig-paren">(</span><em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Class_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports a module from a fileName (stripped of the .py) and returns the class</p>
<p>Assumes the class is named the same as the module. To get</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.Dict_to_file">
<code class="sig-name descname">Dict_to_file</code><span class="sig-paren">(</span><em class="sig-param">anyDict</em>, <em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em>, <em class="sig-param">typeSuffix</em>, <em class="sig-param">dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Dict_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a dicitonary as JSON encoded text file</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.Dict_to_obj_fields">
<code class="sig-name descname">Dict_to_obj_fields</code><span class="sig-paren">(</span><em class="sig-param">anObject</em>, <em class="sig-param">aDict</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Dict_to_obj_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets attributes for the object anObject from the keys and values of dictionay aDict</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.Edit_dict">
<code class="sig-name descname">Edit_dict</code><span class="sig-paren">(</span><em class="sig-param">anyDict</em>, <em class="sig-param">longName</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Edit_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Edits values in a passed in dict, in a generic way, not having to know ahead of time the name and type of each setting
Assumption is made that lists/tuples contain only strings, ints, or float types, and that all members of any list/tuple are same type</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.File_exists">
<code class="sig-name descname">File_exists</code><span class="sig-paren">(</span><em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em>, <em class="sig-param">typeSuffix</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.File_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if a file with name ‘<a href="#id2"><span class="problematic" id="id3">AHF_</span></a>’ + nameTypeStr + ‘_’ + nameStr + typeSuffix exists in current directory</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.File_from_user">
<code class="sig-name descname">File_from_user</code><span class="sig-paren">(</span><em class="sig-param">nameTypeStr</em>, <em class="sig-param">longName</em>, <em class="sig-param">typeSuffix</em>, <em class="sig-param">makeNew=False</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.File_from_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Static method that trawls through current folder looking for python files matching nameTypeStr</p>
<p>Allows user to choose from the list of files found. Files are recognized by names starting
with ‘<a href="#id4"><span class="problematic" id="id5">AHF_</span></a>’ + nameTypeStr’ + ‘_’ and ending with ‘.typeSuffix’
Raises: FileNotFoundError if no nameStr class files found</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.File_to_dict">
<code class="sig-name descname">File_to_dict</code><span class="sig-paren">(</span><em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em>, <em class="sig-param">typeSuffix</em>, <em class="sig-param">dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.File_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets attributes for the object anObject from the keys and values of dictionay aDict loaded from the file</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.File_to_obj_fields">
<code class="sig-name descname">File_to_obj_fields</code><span class="sig-paren">(</span><em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em>, <em class="sig-param">typeSuffix</em>, <em class="sig-param">anObject</em>, <em class="sig-param">dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.File_to_obj_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets attributes for the object anObject from the keys and values of dictionay aDict loaded from the file</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.Obj_fields_to_file">
<code class="sig-name descname">Obj_fields_to_file</code><span class="sig-paren">(</span><em class="sig-param">anObject</em>, <em class="sig-param">nameTypeStr</em>, <em class="sig-param">nameStr</em>, <em class="sig-param">typeSuffix</em>, <em class="sig-param">dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Obj_fields_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a file containing a json dictionary of all the fields of the object anObject</p>
</dd></dl>

<dl class="function">
<dt id="AHF_ClassAndDictUtils.Show_ordered_dict">
<code class="sig-name descname">Show_ordered_dict</code><span class="sig-paren">(</span><em class="sig-param">objectDict</em>, <em class="sig-param">longName</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_ClassAndDictUtils.Show_ordered_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps standard dictionary settings into an ordered dictionary, prints settings to screen in a numbered fashion from the ordered dictionary,
making it easy to select a setting to change. Returns an  ordered dictionary of {number: (key:value),} used by edit_dict function</p>
</dd></dl>

</div>
<div class="section" id="module-AHF_Task">
<span id="ahf-contactcheck-beambreak"></span><h2>AHF_ContactCheck_BeamBreak<a class="headerlink" href="#module-AHF_Task" title="Permalink to this headline">¶</a></h2>
<p>We copy all variables from cage settings and exp settings, plus references to all created objects,
into a single object called Task</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">fileName=''</em>, <em class="sig-param">object=None</em><span class="sig-paren">)</span></dt>
<dd><p>The plan is to copy all variables from settings, user, into a single object
The object will have fields for things loaded from hardware config dictionary and experiment config dictionary
as well as fields for objects created when program runs (headFixer, TagReader, rewarder, camera, stimulator)
Objects that are created will have a dictionary of their own as an entry in the main dictionay
Using the same names in the object fields as in the dictionary, and only loading one dictionary from
a combined settings file, we don’t need a dictionary while thr program is running because the task object can recreate the dict
with self.__dict__</p>
<dl class="method">
<dt>
<code class="sig-name descname">saveSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Saves current configuration stored in the task object into AHF_task_*.jsn
Call this function after modifying the contents of the task to save your changes</p>
<dl class="field-list simple">
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>none</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Sets up hardware and other objects that need setting up, each object is made by initing a class with a dictionary</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">showSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Prints settings to screen in a numbered fashion from an ordered dictionary, making it easy to select a setting to
change. Returns the ordered dictionary, used by editSettings function</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_DataLogger">
<span id="ahf-datalogger"></span><h2>AHF_Datalogger<a class="headerlink" href="#module-AHF_DataLogger" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_DataLogger.AHF_DataLogger">
<em class="property">class </em><code class="sig-name descname">AHF_DataLogger</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>A Data Logger provides an interface to save task data, and to save
and load mouse configuration data. This can be either to text files, or to
a database, or hd5 files, or some combination thereof. The data logger
should also print status updates to the shell, but these don’t need to contain
as much information. The brain imaging data is saved
separately, but references to movie files should be saved by data logger.
Similarly, other binary data (lever positons, anyone?) can be saved separately,
by the Stimulator class, but binary file/posiiton can be saved as an event.</p>
<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.configGenerator">
<em class="property">abstract </em><code class="sig-name descname">configGenerator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.configGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>generates configuration data for each subject as (IDtag, dictionary) tuples from some kind of permanent storage
such as a JSON file, or a database. Will be called when program is started, or restarted and settings
need to be reloaded.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.getConfigData">
<em class="property">abstract </em><code class="sig-name descname">getConfigData</code><span class="sig-paren">(</span><em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.getConfigData" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a dictionary of data that was saved for this reference tag, in some permanent storage such as a JSON file
Will be called when program is started, or restarted and settings need to be reloaded</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.getMice">
<em class="property">abstract </em><code class="sig-name descname">getMice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.getMice" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of mice that are in the dictionary/database</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.getTrackedEvent">
<code class="sig-name descname">getTrackedEvent</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">eventKind</em>, <em class="sig-param">dictKey</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.getTrackedEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current value for the specified mouse, event, and key.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.makeLogFile">
<em class="property">abstract </em><code class="sig-name descname">makeLogFile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.makeLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes or opens a text log file, or a datbase, or whatever else needs doing. Called once before
entering main loop of program. DataLogger may make a new file every day in NewDay function, if desired</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.newDay">
<em class="property">abstract </em><code class="sig-name descname">newDay</code><span class="sig-paren">(</span><em class="sig-param">mice</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.newDay" title="Permalink to this definition">¶</a></dt>
<dd><p>At the start of a new day, it was customary for the text-based data logging to start new text files,
and to make a precis of the day’s results into a a separate text file for easy human reading.
This “quickStats” file should contain info for each mouse with rewards, head fixes,
or tasks, and other Stimulator specific data, which Stimulator object will provide for each mouse
just call the Stimulator class functions for each mouse to get a dictionary of results</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.readFromLogFile">
<em class="property">abstract </em><code class="sig-name descname">readFromLogFile</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.readFromLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the log statement <em>index</em> lines prior to the current line.
Returns the event and associated dictionary in a tuple.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.resumeTracking">
<code class="sig-name descname">resumeTracking</code><span class="sig-paren">(</span><em class="sig-param">eventKind</em>, <em class="sig-param">dictKey</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.resumeTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Resumes previously started tracking.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.retireMouse">
<em class="property">abstract </em><code class="sig-name descname">retireMouse</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">reason</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.retireMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>store information about a mouse retirement in a referenced file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.saveNewMouse">
<em class="property">abstract </em><code class="sig-name descname">saveNewMouse</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">note</em>, <em class="sig-param">dictionary</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.saveNewMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>store a new mouse entry in a referenced file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.startTracking">
<code class="sig-name descname">startTracking</code><span class="sig-paren">(</span><em class="sig-param">eventKind</em>, <em class="sig-param">dictKey</em>, <em class="sig-param">trackingType</em>, <em class="sig-param">size=0</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.startTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Begins tracking of the specified key for the specified event.
Tracks as a circular buffer or daily totals.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.stopTracking">
<code class="sig-name descname">stopTracking</code><span class="sig-paren">(</span><em class="sig-param">eventKind</em>, <em class="sig-param">dictKey</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.stopTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Halts previously started tracking.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.storeConfig">
<em class="property">abstract </em><code class="sig-name descname">storeConfig</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">dictionary</em>, <em class="sig-param">source=''</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.storeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores configuration data, given as an IDtag, and dictionary for that tag, in some more permanent storage
as a JSON text file, or a database or hd5 file, so it can be later retrieved by IDtag</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger.AHF_DataLogger.writeToLogFile">
<em class="property">abstract </em><code class="sig-name descname">writeToLogFile</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">eventKind</em>, <em class="sig-param">eventDict</em>, <em class="sig-param">timeStamp</em>, <em class="sig-param">toShellOrFile=3</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger.AHF_DataLogger.writeToLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>The original standard text file method was 4 tab-separated columns, mouse tag, or 0
if no single tag was applicaple, unix time stamp, ISO formatted time, and event. Event
could be anything. Now, every event has a kind, and every kind of event defines a
dictionary. Main program calls writeToLogFile, as well as the Stimulator object
For text based methods, event should be a dictionary for more complicated stimulator
results, so an event can be more easily parsed during data analysis.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_HardwareTester">
<span id="ahf-hardwaretester"></span><h2>AHF_HardwareTester<a class="headerlink" href="#module-AHF_HardwareTester" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="AHF_HardwareTester.hardwareTester">
<code class="sig-name descname">hardwareTester</code><span class="sig-paren">(</span><em class="sig-param">task</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HardwareTester.hardwareTester" title="Permalink to this definition">¶</a></dt>
<dd><p>Hardware Tester for Auto Head Fixing, allows you to verify the various hardware bits are working</p>
</dd></dl>

</div>
<div class="section" id="module-AHF_HeadFixer">
<span id="ahf-headfixer"></span><h2>AHF_HeadFixer<a class="headerlink" href="#module-AHF_HeadFixer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_HeadFixer.AHF_HeadFixer">
<em class="property">class </em><code class="sig-name descname">AHF_HeadFixer</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all head fix classs. Other head fixers subclass from this, or from one of its subclasses
boolean for settability of headFixing levels, default is False. Can be used for incremental learning</p>
<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.config_user_get">
<em class="property">abstract static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.fixMouse">
<em class="property">abstract </em><code class="sig-name descname">fixMouse</code><span class="sig-paren">(</span><em class="sig-param">thisTag</em>, <em class="sig-param">resultsDict={}</em>, <em class="sig-param">settingsDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.fixMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>performs head fixation by energizing a piston, moving a servomotor, etc
returns True if successful, else false.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.hasMouseLog">
<code class="sig-name descname">hasMouseLog</code><span class="sig-paren">(</span><em class="sig-param">hasContact</em>, <em class="sig-param">isFixed</em>, <em class="sig-param">thisTag</em>, <em class="sig-param">resultsDict</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.hasMouseLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function for head fix subclasses
Run after head fixing to update common results</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.newResultsDict">
<code class="sig-name descname">newResultsDict</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.newResultsDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary counting number of head fixes, subclasses could track more levels of head fixing, e.g.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.releaseMouse">
<em class="property">abstract </em><code class="sig-name descname">releaseMouse</code><span class="sig-paren">(</span><em class="sig-param">thisTag</em>, <em class="sig-param">resultsDict={}</em>, <em class="sig-param">settingsDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.releaseMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>releases mouse from head fixation by relaxing a piston, moving a servomotor, etc</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>gets settings from dict, not &#64;abstract because this may be all you nees, as for HeadFixer_NoFix</p>
</dd></dl>

<dl class="method">
<dt id="AHF_HeadFixer.AHF_HeadFixer.waitForMouse">
<code class="sig-name descname">waitForMouse</code><span class="sig-paren">(</span><em class="sig-param">thisTag</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_HeadFixer.AHF_HeadFixer.waitForMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function for head fix subclasses
Waits for a mouse to either make contact or leave the chamber</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="AHF_HeadFixer.random">
<code class="sig-name descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; x in the interval [0, 1).<a class="headerlink" href="#AHF_HeadFixer.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-AHF_LickDetector">
<span id="ahf-lickdetector"></span><h2>AHF_LickDetector<a class="headerlink" href="#module-AHF_LickDetector" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_LickDetector.AHF_LickDetector">
<em class="property">class </em><code class="sig-name descname">AHF_LickDetector</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for lick detetctor. Some kind of touch sensor on water port, capacitive or electrical.
Should only report touches of the lick port, not un-touches. May have multiple channels. Must be
able to count licks in an independent thread or via a threaded callback</p>
<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.getTouches">
<em class="property">abstract </em><code class="sig-name descname">getTouches</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.getTouches" title="Permalink to this definition">¶</a></dt>
<dd><p>returns number (bit-wise per channel lick detetctor has multiple channels) of which channels are currently touched</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.startLickCount">
<em class="property">abstract </em><code class="sig-name descname">startLickCount</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.startLickCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeros the array that stores lick counts for each channel, and makes sure callback is filling the array for requested channels</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.startLickTiming">
<em class="property">abstract </em><code class="sig-name descname">startLickTiming</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.startLickTiming" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeros the array that stores lick counts for each channel, and makes sure callback is filling the array for requested channels</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.startLogging">
<em class="property">abstract </em><code class="sig-name descname">startLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.startLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the datalogger logging licks to the shell, and to a file if one was provided</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.stopLickCount">
<em class="property">abstract </em><code class="sig-name descname">stopLickCount</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.stopLickCount" title="Permalink to this definition">¶</a></dt>
<dd><p>takes a tuple of channels and returns a list where each member is the number of licks for that channel in the global array
call zeroLickCount, wait a while for some licks, then call getLickCount</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.stopLickTiming">
<em class="property">abstract </em><code class="sig-name descname">stopLickTiming</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.stopLickTiming" title="Permalink to this definition">¶</a></dt>
<dd><p>takes a tuple of channels and returns a list where each member is the number of licks for that channel in the global array
call zeroLickCount, wait a while for some licks, then call getLickCount</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.stopLogging">
<em class="property">abstract </em><code class="sig-name descname">stopLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.stopLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the datalogger logging licks to the shell and file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_LickDetector.AHF_LickDetector.waitForLick">
<em class="property">abstract </em><code class="sig-name descname">waitForLick</code><span class="sig-paren">(</span><em class="sig-param">timeOut_secs</em>, <em class="sig-param">startFromZero=False</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_LickDetector.AHF_LickDetector.waitForLick" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for a lick on any channel. Returns channel that was touched, or 0 if timeout expires with no touch,
or -1 if startFromZero was True and the detector was touched for entire time</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Notifier">
<span id="ahf-notifier"></span><h2>AHF_Notifier<a class="headerlink" href="#module-AHF_Notifier" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Notifier.AHF_Notifier">
<em class="property">class </em><code class="sig-name descname">AHF_Notifier</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Notifier.AHF_Notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Some remote way of notifying somebody, with email or text or something.</p>
<dl class="method">
<dt id="AHF_Notifier.AHF_Notifier.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Notifier.AHF_Notifier.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Notifier.AHF_Notifier.notify">
<em class="property">abstract </em><code class="sig-name descname">notify</code><span class="sig-paren">(</span><em class="sig-param">msgStr</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Notifier.AHF_Notifier.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>a more general method to send text information</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Notifier.AHF_Notifier.notifyStuck">
<em class="property">abstract </em><code class="sig-name descname">notifyStuck</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">cageID</em>, <em class="sig-param">duration</em>, <em class="sig-param">isStuck</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Notifier.AHF_Notifier.notifyStuck" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a text message with the given information.</p>
<p>Two types of message can be sent, depending if isStuck is True or False
No timing is done by the AHF_Notifier class, the durations are only for building the text mssg
:param tag: RFID tag of the mouse
:param cageID: cage ID of the mouse that is stuck
:param durationSecs: how long the mouse has been inside the chamber
:param isStuck: boolean signifying if the mouse has been inside the chamber for too long, or has just left the chamber
:return: nothing</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Reader">
<span id="ahf-reader"></span><h2>AHF_Reader<a class="headerlink" href="#module-AHF_Reader" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Reader.AHF_Reader">
<em class="property">class </em><code class="sig-name descname">AHF_Reader</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Reader.AHF_Reader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="AHF_Reader.AHF_Reader.startLogging">
<em class="property">abstract </em><code class="sig-name descname">startLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Reader.AHF_Reader.startLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>starts using data logger to start logging entries/exits</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Reader.AHF_Reader.stopLogging">
<em class="property">abstract </em><code class="sig-name descname">stopLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Reader.AHF_Reader.stopLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>stops  data logger from logging entries/exits</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Rewarder">
<span id="ahf-rewarder"></span><h2>AHF_Rewarder<a class="headerlink" href="#module-AHF_Rewarder" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Rewarder.AHF_Rewarder">
<em class="property">class </em><code class="sig-name descname">AHF_Rewarder</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Rewarder.AHF_Rewarder" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all rewarder classs. Other rewarders subclass from this, or from one of its subclasses</p>
<dl class="method">
<dt id="AHF_Rewarder.AHF_Rewarder.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Rewarder.AHF_Rewarder.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Rewarder.AHF_Rewarder.rewardControl">
<code class="sig-name descname">rewardControl</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Rewarder.AHF_Rewarder.rewardControl" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens and closes valve, as for testing, or draining the lines</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Settings">
<span id="ahf-settings"></span><h2>AHF_Settings<a class="headerlink" href="#module-AHF_Settings" title="Permalink to this headline">¶</a></h2>
<p>AHF_Settings provides functions to read, edit, and save settings for the AutoheadFix program</p>
<dl class="function">
<dt id="AHF_Settings.config_from_user">
<code class="sig-name descname">config_from_user</code><span class="sig-paren">(</span><em class="sig-param">task</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Settings.config_from_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the user for settings. This function may run before a camera or stimulator has been configured</p>
<p>We need to run static function for stimulator configuration and camera configuration</p>
</dd></dl>

<dl class="function">
<dt id="AHF_Settings.edit_from_user">
<code class="sig-name descname">edit_from_user</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Settings.edit_from_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows user to edit experiment settings, including stimulator settings, but not camera settings</p>
<p>user can either change the stimulaotr, or reconfigure it, but not both
:returns: code for mods - bit 0 = 1 is set if stimulator config is changed, bit 1 =2 is set if stimulator is changed</p>
</dd></dl>

<dl class="function">
<dt id="AHF_Settings.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">task</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Settings.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves current settings to a dictionary and then sends dictionary to a json dictionary file</p>
</dd></dl>

<dl class="function">
<dt id="AHF_Settings.show">
<code class="sig-name descname">show</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Settings.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the current configuration stored in this AHF_Settings to the console, nicely formatted</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param</dt>
<dd class="field-odd"><p>none</p>
</dd>
<dt class="field-even">returns</dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-AHF_Stimulator">
<span id="ahf-stimulator"></span><h2>AHF_Stimulator<a class="headerlink" href="#module-AHF_Stimulator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Stimulator.AHF_Stimulator">
<em class="property">class </em><code class="sig-name descname">AHF_Stimulator</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator.AHF_Stimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Stimulator does all stimulation and reward during a head fix task
All events and their timings in a head fix, including rewards, are controlled by a Stimulator.</p>
<dl class="method">
<dt id="AHF_Stimulator.AHF_Stimulator.run">
<em class="property">abstract </em><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">level=0</em>, <em class="sig-param">resultsDict={}</em>, <em class="sig-param">settingsDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulator.AHF_Stimulator.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at start of each head fix. Does whatever</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Stimulus">
<span id="ahf-stimulus"></span><h2>AHF_Stimulus<a class="headerlink" href="#module-AHF_Stimulus" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Stimulus.AHF_Stimulus">
<em class="property">class </em><code class="sig-name descname">AHF_Stimulus</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulus.AHF_Stimulus" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="AHF_Stimulus.AHF_Stimulus.trialEnd">
<em class="property">abstract </em><code class="sig-name descname">trialEnd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulus.AHF_Stimulus.trialEnd" title="Permalink to this definition">¶</a></dt>
<dd><p>Code to be run at end of trial. E.g. moving laser to zero position</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Stimulus.AHF_Stimulus.trialPrep">
<em class="property">abstract </em><code class="sig-name descname">trialPrep</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Stimulus.AHF_Stimulus.trialPrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares stimulus for trial: e.g. aligns laser, preps vib. motor, etc</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Subjects">
<span id="ahf-subjects"></span><h2>AHF_Subjects<a class="headerlink" href="#module-AHF_Subjects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Subjects.AHF_Subjects">
<em class="property">class </em><code class="sig-name descname">AHF_Subjects</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for experimental subjects. Defines subject attributes. Subjects must be unique for ID attribute
Subclasses may wish to define an inner class that describes an object for a single experimental subject.</p>
<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.add">
<em class="property">abstract </em><code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param">IDnum</em>, <em class="sig-param">dataDict</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new subject to the pool of subjects, initializing subject fields with data from a dictionary
returns True if subject was added, false if subject with IDnum already exists in subject pool</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.check">
<em class="property">abstract </em><code class="sig-name descname">check</code><span class="sig-paren">(</span><em class="sig-param">IDnum</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.check" title="Permalink to this definition">¶</a></dt>
<dd><p>returns 1 if IDnum is already in subjects, 0 if IDnum is not in subjects but is elgible to be added, returns -1 if IDnum is not elgible to be added</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.generator">
<em class="property">abstract </em><code class="sig-name descname">generator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function that generates dictionaries of settings for all of the subjects in turn</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.get">
<em class="property">abstract </em><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">IDnum</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.get" title="Permalink to this definition">¶</a></dt>
<dd><p>returns results/settings dictionary for individual in group of subjects based on a ID tag.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.remove">
<em class="property">abstract </em><code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param">IDnum</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a subject from the pool of subjects, based on IDnumber. Returns true if subject with given OD was
found and removed, returns false if no subject with IDnum was found in pool of subjects</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.setup">
<em class="property">abstract </em><code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>results tuple defines dictionaries for subjects that our favorite objects will write results to
for making daily tallies of results
HeadFixer writes number of headfixes and un-fixes to its dictionary
rewarder writes number and kind of rewards given to its dictionary
TagReader writes number of chamber entrances to its dictionary
Stimulator writes results of whatever it does during a head-fix session</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.show">
<em class="property">abstract </em><code class="sig-name descname">show</code><span class="sig-paren">(</span><em class="sig-param">IDNum=0</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints out attributes for subject with given IDNum. If IDNum is 0, prints attributes for all subjects in pool.
The attributes will be defined by subclass, results provided by stimulator, etc. Returns true if IDNum was found in
pool, else False</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.subjectSettings">
<em class="property">abstract </em><code class="sig-name descname">subjectSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.subjectSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>changes the subject specific parameters that are (usually) independent from basic hardware settings
e.g. headfix time, headfix tightness, reward size, add or remove a subject to a cage, stimulation specifications,
task settings</p>
</dd></dl>

<dl class="method">
<dt id="AHF_Subjects.AHF_Subjects.userEdit">
<em class="property">abstract </em><code class="sig-name descname">userEdit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Subjects.AHF_Subjects.userEdit" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows user interaction to add and remove subjects, maybe print out and edit individual configuration</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_Trigger">
<span id="ahf-trigger"></span><h2>AHF_Trigger<a class="headerlink" href="#module-AHF_Trigger" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_Trigger.AHF_Trigger">
<em class="property">class </em><code class="sig-name descname">AHF_Trigger</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_Trigger.AHF_Trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends/receives signals as to another pi to start/stop recording</p>
</dd></dl>

</div>
<div class="section" id="module-AHF_Task">
<span id="ahf-valvecontrol"></span><h2>AHF_ValveControl<a class="headerlink" href="#module-AHF_Task" title="Permalink to this headline">¶</a></h2>
<p>We copy all variables from cage settings and exp settings, plus references to all created objects,
into a single object called Task</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">Task</code><span class="sig-paren">(</span><em class="sig-param">fileName=''</em>, <em class="sig-param">object=None</em><span class="sig-paren">)</span></dt>
<dd><p>The plan is to copy all variables from settings, user, into a single object
The object will have fields for things loaded from hardware config dictionary and experiment config dictionary
as well as fields for objects created when program runs (headFixer, TagReader, rewarder, camera, stimulator)
Objects that are created will have a dictionary of their own as an entry in the main dictionay
Using the same names in the object fields as in the dictionary, and only loading one dictionary from
a combined settings file, we don’t need a dictionary while thr program is running because the task object can recreate the dict
with self.__dict__</p>
<dl class="method">
<dt>
<code class="sig-name descname">saveSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Saves current configuration stored in the task object into AHF_task_*.jsn
Call this function after modifying the contents of the task to save your changes</p>
<dl class="field-list simple">
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>none</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Sets up hardware and other objects that need setting up, each object is made by initing a class with a dictionary</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">showSettings</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Prints settings to screen in a numbered fashion from an ordered dictionary, making it easy to select a setting to
change. Returns the ordered dictionary, used by editSettings function</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-AHF_DataLogger_mysql">
<span id="ahf-datalogger-mysql"></span><h2>AHF_DataLogger_mysql<a class="headerlink" href="#module-AHF_DataLogger_mysql" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql">
<em class="property">class </em><code class="sig-name descname">AHF_DataLogger_mysql</code><span class="sig-paren">(</span><em class="sig-param">taskP</em>, <em class="sig-param">settingsDictP</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple text-based data logger modified from the original Auto Head Fix code
makes a new text logfile for each day, saved in default data path.</p>
<p>Mouse data is stored in a specified folder, also as text files, one text file per mouse
containing JSON formatted configuration and performance data. These files will opened and
updated after each exit from the experimental tube, in case the program needs to be restarted
The file name for each mouse contains RFID tag 0-padded to 13 spaces: AHF_mouse_1234567890123.jsn</p>
<p>REQUESTED VALUES:
“exit” for exits as event
“lever_pull” as event for lever data
“positions” as key for the lever positions in the event_dictionary of “lever_pull”</p>
<dl class="attribute">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.PSEUDO_MUTEX">
<code class="sig-name descname">PSEUDO_MUTEX</code><em class="property"> = 0</em><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.PSEUDO_MUTEX" title="Permalink to this definition">¶</a></dt>
<dd><p>The class field PSEUDO_MUTEX helps prevent print statements from different places in the code (main vs
callbacks) from executing at the same time, which leads to garbled output. Unlike a real mutex, execution
of the thread is not halted while waiting on the PSEUDO_MUTEX, hence the loops with calls to sleep to
allow the other threads of execution to continue while waiting for the mutex to be free. Also, read/write
to the PSEUDO_MUTEX is not atomic; one thread may read PSEUDO_MUTEX as 0, and set it to 1, but in the
interval between reading and writing to PSEUDO_MUTEX,another thread may have read PSEUDO_MUTEX as 0 and
both threads think they have the mutex</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.about">
<em class="property">static </em><code class="sig-name descname">about</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.about" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a brief message describing your sub-class, used when asking user to pick a sub-class of this class</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.configGenerator">
<code class="sig-name descname">configGenerator</code><span class="sig-paren">(</span><em class="sig-param">settings</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.configGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Each configuration file has config data for a single subject. This function loads data
from all of them in turn, and returning each as a a tuple of (tagID, dictionary)</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.config_user_get">
<em class="property">static </em><code class="sig-name descname">config_user_get</code><span class="sig-paren">(</span><em class="sig-param">starterDict={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.config_user_get" title="Permalink to this definition">¶</a></dt>
<dd><p>static method that querries user for settings, with default responses from starterDict,
and returns starterDict with settings as edited by the user.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.getConfigData">
<code class="sig-name descname">getConfigData</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">source</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.getConfigData" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a dictionary of data that was saved for this reference tag, in some permanent storage such as a JSON file
Will be called when program is started, or restarted and settings need to be reloaded</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.getMice">
<code class="sig-name descname">getMice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.getMice" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of mice that are in the dictionary/database</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.hardwareTest">
<code class="sig-name descname">hardwareTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.hardwareTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests functionality, gives user a chance to change settings.
:Returns: bool – True if any settings have changed</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.makeLogFile">
<code class="sig-name descname">makeLogFile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.makeLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiating database creation</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.newDay">
<code class="sig-name descname">newDay</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.newDay" title="Permalink to this definition">¶</a></dt>
<dd><p>At the start of a new day, it was customary for the text-based data logging to start new text files,
and to make a precis of the day’s results into a a separate text file for easy human reading.
This “quickStats” file should contain info for each mouse with rewards, head fixes,
or tasks, and other Stimulator specific data, which Stimulator object will provide for each mouse
just call the Stimulator class functions for each mouse to get a dictionary of results</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.readFromLogFile">
<code class="sig-name descname">readFromLogFile</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.readFromLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the log statement <em>index</em> lines prior to the current line.
Returns the event and associated dictionary in a tuple.</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.retireMouse">
<code class="sig-name descname">retireMouse</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">reason</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.retireMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>store information about a mouse retirement in a referenced file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.saveNewMouse">
<code class="sig-name descname">saveNewMouse</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">note</em>, <em class="sig-param">dictionary={}</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.saveNewMouse" title="Permalink to this definition">¶</a></dt>
<dd><p>store a new mouse entry in a referenced file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.setdown">
<code class="sig-name descname">setdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.setdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes session end and closes log file</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>does hardware initialization with (possibly updated) info in self.settingsDict
Run by __init__, or can be run  separately after editing the settingsDict</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool – the truth that setup completed without errors</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.storeConfig">
<code class="sig-name descname">storeConfig</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">configDict</em>, <em class="sig-param">source</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.storeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores configuration data, given as an IDtag, and dictionary for that tag, in some more permanent storage
as a JSON text file, or a database or hd5 file, so it can be later retrieved by IDtag</p>
</dd></dl>

<dl class="method">
<dt id="AHF_DataLogger_mysql.AHF_DataLogger_mysql.writeToLogFile">
<code class="sig-name descname">writeToLogFile</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">eventKind</em>, <em class="sig-param">eventDict</em>, <em class="sig-param">timeStamp</em>, <em class="sig-param">toShellOrFile=3</em><span class="sig-paren">)</span><a class="headerlink" href="#AHF_DataLogger_mysql.AHF_DataLogger_mysql.writeToLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>The original standard text file method was 4 tab-separated columns, mouse tag, or 0
if no single tag was applicaple, unix time stamp, ISO formatted time, and event. Event
could be anything. Now, every event has a kind, and every kind of event defines a
dictionary. Main program calls writeToLogFile, as well as the Stimulator object
For text based methods, event should be a dictionary for more complicated stimulator
results, so an event can be more easily parsed during data analysis.</p>
</dd></dl>

</dd></dl>

<div class="toctree-wrapper compound">
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to AutoHeadFix’s documentation!</a><ul>
<li><a class="reference internal" href="#ahf-base-py">AHF_Base.py</a></li>
<li><a class="reference internal" href="#module-AHF_Task">AHF_Task</a></li>
<li><a class="reference internal" href="#module-AHF_BrainLight">AHF_BrainLight</a></li>
<li><a class="reference internal" href="#ahf-camera2">AHF_Camera2</a></li>
<li><a class="reference internal" href="#module-AHF_ContactCheck_Elec">AHF_ContactCheck_Elec</a></li>
<li><a class="reference internal" href="#ahf-headfixer-nofix">AHF_HeadFixer_NoFix</a></li>
<li><a class="reference internal" href="#module-AHF_HeadFixer_PWM">AHF_HeadFixer_PWM</a></li>
<li><a class="reference internal" href="#module-AHF_Stimulator_Lever">AHF_Stimulator_Lever</a></li>
<li><a class="reference internal" href="#module-AHF_ClassAndDictUtils">AHF_ClassAndDictUtils</a></li>
<li><a class="reference internal" href="#module-AHF_Task">AHF_ContactCheck_BeamBreak</a></li>
<li><a class="reference internal" href="#module-AHF_DataLogger">AHF_Datalogger</a></li>
<li><a class="reference internal" href="#module-AHF_HardwareTester">AHF_HardwareTester</a></li>
<li><a class="reference internal" href="#module-AHF_HeadFixer">AHF_HeadFixer</a></li>
<li><a class="reference internal" href="#module-AHF_LickDetector">AHF_LickDetector</a></li>
<li><a class="reference internal" href="#module-AHF_Notifier">AHF_Notifier</a></li>
<li><a class="reference internal" href="#module-AHF_Reader">AHF_Reader</a></li>
<li><a class="reference internal" href="#module-AHF_Rewarder">AHF_Rewarder</a></li>
<li><a class="reference internal" href="#module-AHF_Settings">AHF_Settings</a></li>
<li><a class="reference internal" href="#module-AHF_Stimulator">AHF_Stimulator</a></li>
<li><a class="reference internal" href="#module-AHF_Stimulus">AHF_Stimulus</a></li>
<li><a class="reference internal" href="#module-AHF_Subjects">AHF_Subjects</a></li>
<li><a class="reference internal" href="#module-AHF_Trigger">AHF_Trigger</a></li>
<li><a class="reference internal" href="#module-AHF_Task">AHF_ValveControl</a></li>
<li><a class="reference internal" href="#module-AHF_DataLogger_mysql">AHF_DataLogger_mysql</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">AutoHeadFix 2.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Jamie Boyd, Braeden Jury, David Bierbrauer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>